# System V 消息队列

### 概述

什么是System V 消息队列？它是早期的System V UNIX系统上的一种进程间通讯机制。 所谓消息队列， 即它是一个队列，与管道类似都是先进先出的数据结构。那么区别是什么呢？有如下几点:

- 消息队列存在边界(管道不存在边界)
- 消息队列具有一个整形type字段

消息队列进行通信是面向消息的， 即读者接收到由写者写入的整条消息。 **读取一条消息的一部分而让剩余部分遗留在队列中或一次性读取多条消息是不可能的。**

### 系统调用

- 创建或打开一个消息队列

```c
#include <sys/types.h>
#include <sys/msg.h>

// 如果调用成功， 返回消息队列的ID, 否则返回-1
int msgget(key_t key, int msgflg);
```

